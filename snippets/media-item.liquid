{% liquid 
  assign media_image_width = image_width | default:"2000"
%}

<div class="media_type-item {{ class }}" data-media-id="{{ media.id }}" data-media-type="{{ media.media_type }}" data-index="{{ data_index }}">
	{%- if media.media_type == 'image' -%}
		<div class="media_type-image">
			<div class="image">
                <picture>
                    <source srcset="{{ media | image_url: width: 768 }}"  media="(max-width: 768px)" />
                    <source srcset="{{ media | image_url: width: media_image_width }}" media="(min-width: 769px)" />
                    <img src="{{ media | image_url: width: 768 }}" width="768" height="auto" />
                </picture>
            </div>
		</div>
	{%- else -%}
	  {%- if media.media_type == 'video' or media.media_type == 'external_video' -%}
		  {% liquid
			assign media_type = 'media_type-shopify'
			if media.media_type == 'external_video'
			  assign media_type = 'media_type-' | append: media.host
			endif
		  %}
		  <div class="media-video {{ media_type }} poab">
			  <div class="media-poster">
				  {% comment %} <span class="visually-hidden">{{ 'products.product.media.play_video' | t }}</span>
				  <div class="media-poster_btn">
					<div class="ripple-box">
						<div class="ripple-content"><svg width="10" height="14" viewBox="0 0 10 14" fill="currentColor" aria-hidden="true" focusable="false" role="presentation" class="icon"><path d="M1.482.815A1 1 0 0 0 0 1.69v10.517a1 1 0 0 0 1.525.851L10.54 7.5a1 1 0 0 0-.043-1.728L1.481.815Z"/></svg></div>
					</div>
					</div> {% endcomment %}
				<div class="preview-image"><img src="https://cdn.shopify.com/s/files/1/0517/0436/5244/files/tr-ph.png?v=1757930988" width="1000" height="1000" alt="{{ media.preview_image.alt }}"></div>
			  </div>
				{% case media.media_type %}
					{% when 'external_video' %}
						{% assign video_class = 'js-' | append: media.host %}
						{% if media.host == 'youtube' %}
						{% echo media | external_video_url: autoplay: true, loop: loop, playlist: media.external_id | external_video_tag: class: video_class, loading: 'lazy' %}
						{% else %}
						{% echo media | external_video_url: autoplay: true, loop: loop | external_video_tag: class: video_class, loading: 'lazy' %}
						{% endif %}
					{% when 'video' %}
						{%liquid
							if media.sources[1].url != blank 
								assign source_url = media.sources[1].url
							else
								assign source_url = media.sources[0].url
							endif
						%}
						
						<video playsinline="true" autoplay="autoplay" loop="loop" preload="metadata" muted="muted" controls="controls" class="video-position slide-video" poster="https://cdn.shopify.com/s/files/1/0517/0436/5244/files/tr-ph.png?v=1757930988">
							<source data-src="{{ source_url }}" type="video/mp4" />
							<img src="https://cdn.shopify.com/s/files/1/0517/0436/5244/files/tr-ph.png?v=1757930988" width="700" height="auto" />
						</video>
					{% when 'model' %}
						{% echo media | media_tag: image_size: "1726x", toggleable: true %}
				{% endcase %}
		  </div>
		{%- endif -%}
	{%- endif -%}
</div>